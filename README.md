# ğŸš€ Dabanc Launchpad Protocol

> å»ä¸­å¿ƒåŒ–æ‰¹é‡æ‹å–å¹³å° - æ”¯æŒ KYC ç™½åå•ã€ç»¿é‹æœºåˆ¶ã€åŠ¨æ€ä¾›åº”é‡çš„ RWA å‘è¡Œåè®®

[![Solidity](https://img.shields.io/badge/Solidity-0.8.20-blue)](https://soliditylang.org/)
[![Hardhat](https://img.shields.io/badge/Hardhat-2.x-yellow)](https://hardhat.org/)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æ”¯æŒçš„ç½‘ç»œ](#æ”¯æŒçš„ç½‘ç»œ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å¯åŠ¨æœåŠ¡](#å¯åŠ¨æœåŠ¡)
- [è„šæœ¬è¯´æ˜](#è„šæœ¬è¯´æ˜)
- [åˆçº¦è¯´æ˜](#åˆçº¦è¯´æ˜)
- [é…ç½®æŒ‡å—](#é…ç½®æŒ‡å—)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## é¡¹ç›®æ¦‚è¿°

Dabanc Launchpad æ˜¯ä¸€ä¸ªåŸºäºä»¥å¤ªåŠçš„æ‰¹é‡æ‹å–åè®®ï¼Œä¸“ä¸º RWA (Real World Assets) ä»£å¸å‘è¡Œè®¾è®¡ã€‚

### æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | æè¿° |
|------|------|
| ğŸ“Š **æ‰¹é‡æ‹å–æœºåˆ¶** | ç»Ÿä¸€æ¸…ç®—ä»·æ ¼ (Uniform Clearing Price)ï¼Œç¡®ä¿å…¬å¹³å®šä»· |
| ğŸ”’ **KYC ç™½åå•** | é“¾ä¸Šåˆè§„å‡†å…¥æ§åˆ¶ |
| ğŸ›¡ï¸ **ç»¿é‹æœºåˆ¶** | 15% æŠ¤ç›˜èµ„é‡‘è‡ªåŠ¨é”å®šè‡³é‡‘åº“ |
| ğŸ“ˆ **åŠ¨æ€ä¾›åº”é‡** | æ ¹æ®å¸‚åœºéœ€æ±‚è‡ªåŠ¨è°ƒæ•´æ¯è½®å‘è¡Œé‡ |
| â›“ï¸ **é“¾ä¸‹æ’®åˆ + é“¾ä¸Šç»“ç®—** | é«˜æ•ˆä¸”é€æ˜ |
| ğŸ’° **ä¸€é”®ææ¬¾** | Owner å¯éšæ—¶æå–å‹Ÿé›†èµ„é‡‘ |

### æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·å±‚ (Frontend)                         â”‚
â”‚              React + Wagmi + Viem + RainbowKit                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   ç«ä»·é¢æ¿    â”‚  â”‚  å®æ—¶è®¢å•ç°¿   â”‚  â”‚  ä»·æ ¼æ›²çº¿    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åç«¯æœåŠ¡å±‚ (Backend)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  server.ts   â”‚  â”‚  auto_bot.ts â”‚  â”‚  simulate_   â”‚          â”‚
â”‚  â”‚  (API æœåŠ¡)  â”‚  â”‚  (æ¸…ç®—æœºå™¨äºº) â”‚  â”‚  traffic.ts  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                     â”‚   SQLite DB  â”‚                            â”‚
â”‚                     â”‚   (è®¢å•ç°¿)   â”‚                            â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ™ºèƒ½åˆçº¦å±‚ (Contracts)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ BatchAuction â”‚â—„â”€â”‚ GreenShoeVaultâ”‚  â”‚  MockERC20   â”‚          â”‚
â”‚  â”‚  (æ‹å–åˆçº¦)   â”‚  â”‚   (ç»¿é‹é‡‘åº“)  â”‚  â”‚  (æµ‹è¯•ä»£å¸)   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åŒºå—é“¾ç½‘ç»œ (Anvil / Hyperliquid / Sepolia)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ”¯æŒçš„ç½‘ç»œ

| ç½‘ç»œ | Chain ID | RPC URL | ç”¨é€” |
|------|----------|---------|------|
| **Anvil** | 31337 | `http://127.0.0.1:8545` | æœ¬åœ°å¼€å‘æµ‹è¯• |
| **Hyperliquid Testnet** | 998 | `https://rpc.hyperliquid-testnet.xyz/evm` | æµ‹è¯•ç½‘éƒ¨ç½² |
| **Sepolia** | 11155111 | Alchemy/Infura | ä»¥å¤ªåŠæµ‹è¯•ç½‘ |

---

## å¿«é€Ÿå¼€å§‹

### ğŸ“¦ å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone <repo-url>
cd Dabanc-Launchpad

# å®‰è£…æ ¹ç›®å½•ä¾èµ–
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd dabanc-frontend && npm install && cd ..
```

---

### ğŸš€ ä¸€é”®éƒ¨ç½²

ä¸‰ç§ç½‘ç»œä½¿ç”¨ç»Ÿä¸€çš„éƒ¨ç½²å‘½ä»¤æ ¼å¼ï¼š

```bash
./deploy-<network>.sh
```

| ç½‘ç»œ | éƒ¨ç½²å‘½ä»¤ | å‰ç½®å‡†å¤‡ |
|------|----------|----------|
| **Anvil (æœ¬åœ°)** | `./deploy-anvil.sh` | éœ€å®‰è£… [Foundry](https://getfoundry.sh/) |
| **Hyperliquid** | `./deploy-hyperliquid.sh` | éœ€åœ¨ `.env` é…ç½® `PRIVATE_KEY` |
| **Sepolia** | `./deploy-sepolia.sh` | éœ€åœ¨ `.env` é…ç½® `PRIVATE_KEY` å’Œ `SEPOLIA_RPC_URL` |

---

### ğŸ  Anvil (æœ¬åœ°å¼€å‘)

**æ¨èç”¨äºå¼€å‘å’Œæµ‹è¯•ï¼Œæ— éœ€çœŸå®èµ„é‡‘**

```bash
# ä¸€é”®éƒ¨ç½² (è‡ªåŠ¨å¯åŠ¨ Anvil + éƒ¨ç½²åˆçº¦ + åˆå§‹åŒ–)
./deploy-anvil.sh
```

**è„šæœ¬æ‰§è¡Œå†…å®¹ï¼š**
- âœ… æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- âœ… ç¼–è¯‘æ™ºèƒ½åˆçº¦
- âœ… å¯åŠ¨ Anvil æœ¬åœ°èŠ‚ç‚¹
- âœ… éƒ¨ç½²æ‰€æœ‰åˆçº¦
- âœ… è‡ªåŠ¨æ›´æ–° `.env` æ–‡ä»¶
- âœ… åˆå§‹åŒ–æ•°æ®åº“å’Œç™½åå•

**åœæ­¢ Anvilï¼š**
```bash
./stop-anvil.sh
```

**MetaMask é…ç½®ï¼š**

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| ç½‘ç»œåç§° | Anvil Local |
| RPC URL | `http://127.0.0.1:8545` |
| Chain ID | 31337 |
| è´§å¸ç¬¦å· | ETH |
| æµ‹è¯•ç§é’¥ | `0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80` |

---

### ğŸ”· Hyperliquid æµ‹è¯•ç½‘

**æ¨èç”¨äºå…¬å¼€æµ‹è¯•**

#### å‰ç½®å‡†å¤‡

1. **è·å–æµ‹è¯• HYPE** (ç”¨äºæ”¯ä»˜ Gas):
   - å‰å¾€ [Hyperliquid Testnet](https://app.hyperliquid-testnet.xyz/)
   - è¿æ¥é’±åŒ…å¹¶è·å–æµ‹è¯•ä»£å¸

2. **é…ç½®ç¯å¢ƒå˜é‡**:
```bash
# åˆ›å»º .env æ–‡ä»¶
echo "PRIVATE_KEY=ä½ çš„ç§é’¥ï¼ˆä¸å¸¦0xå‰ç¼€ï¼‰" > .env
```

#### éƒ¨ç½²

```bash
./deploy-hyperliquid.sh
```

**MetaMask é…ç½®ï¼š**

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| ç½‘ç»œåç§° | Hyperliquid Testnet |
| RPC URL | `https://rpc.hyperliquid-testnet.xyz/evm` |
| Chain ID | 998 |
| è´§å¸ç¬¦å· | HYPE |
| æµè§ˆå™¨ | `https://explorer.hyperliquid-testnet.xyz` |

---

### ğŸŸ£ Sepolia æµ‹è¯•ç½‘

#### å‰ç½®å‡†å¤‡

1. **è·å–æµ‹è¯• ETH** (è‡³å°‘ 0.1 ETH):
   - [Alchemy Faucet](https://sepoliafaucet.com)
   - [Google Cloud Faucet](https://cloud.google.com/application/web3/faucet/ethereum/sepolia)

2. **è·å– RPC URL**:
   - æ³¨å†Œ [Alchemy](https://www.alchemy.com/)
   - åˆ›å»º Sepolia é¡¹ç›®ï¼Œå¤åˆ¶ HTTPS URL

3. **é…ç½®ç¯å¢ƒå˜é‡**:
```bash
# .env
PRIVATE_KEY=ä½ çš„ç§é’¥ï¼ˆä¸å¸¦0xå‰ç¼€ï¼‰
SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/ä½ çš„API_KEY
```

#### éƒ¨ç½²

```bash
./deploy-sepolia.sh
```

---

## å¯åŠ¨æœåŠ¡

éƒ¨ç½²å®Œæˆåï¼Œéœ€è¦å¯åŠ¨ä»¥ä¸‹ 4 ä¸ªæœåŠ¡ï¼š

### ğŸ“º ç»ˆç«¯å¸ƒå±€å»ºè®®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç»ˆç«¯ 1        â”‚   ç»ˆç«¯ 2        â”‚
â”‚   å‰ç«¯æœåŠ¡      â”‚   API æœåŠ¡      â”‚
â”‚                 â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç»ˆç«¯ 3        â”‚   ç»ˆç«¯ 4        â”‚
â”‚   æ¸…ç®—æœºå™¨äºº    â”‚   æµé‡æ¨¡æ‹Ÿå™¨    â”‚
â”‚                 â”‚   (å¯é€‰)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ ç»Ÿä¸€å‘½ä»¤æ ¼å¼

æ‰€æœ‰åç«¯è„šæœ¬ä½¿ç”¨ç›¸åŒçš„å‘½ä»¤æ ¼å¼ï¼Œåªéœ€æ›¿æ¢ `<network>` å‚æ•°ï¼š

| ç½‘ç»œ | `<network>` å‚æ•° |
|------|------------------|
| Anvil | `localhost` |
| Hyperliquid | `hyperliquid_testnet` |
| Sepolia | `sepolia` |

---

### 1ï¸âƒ£ å¯åŠ¨å‰ç«¯

```bash
cd dabanc-frontend
npm run dev
```

å‰ç«¯è®¿é—®åœ°å€: **http://localhost:5173**

> âš ï¸ å¯åŠ¨å‰ç¡®è®¤ `dabanc-frontend/src/wagmi.ts` ä¸­çš„ `ACTIVE_NETWORK` ä¸éƒ¨ç½²ç½‘ç»œä¸€è‡´

---

### 2ï¸âƒ£ å¯åŠ¨ API æœåŠ¡ (è®¢å•ç°¿)

```bash
npx hardhat run scripts/server.ts --network <network>
```

**ç¤ºä¾‹ï¼š**
```bash
# Anvil
npx hardhat run scripts/server.ts --network localhost

# Hyperliquid
npx hardhat run scripts/server.ts --network hyperliquid_testnet

# Sepolia
npx hardhat run scripts/server.ts --network sepolia
```

---

### 3ï¸âƒ£ å¯åŠ¨æ¸…ç®—æœºå™¨äºº

```bash
npx hardhat run scripts/auto_bot.ts --network <network>
```

**ç¤ºä¾‹ï¼š**
```bash
# Anvil
npx hardhat run scripts/auto_bot.ts --network localhost

# Hyperliquid
npx hardhat run scripts/auto_bot.ts --network hyperliquid_testnet

# Sepolia
npx hardhat run scripts/auto_bot.ts --network sepolia
```

---

### 4ï¸âƒ£ å¯åŠ¨æµé‡æ¨¡æ‹Ÿå™¨ (å¯é€‰)

```bash
npx hardhat run scripts/simulate_traffic.ts --network <network>
```

**ç¤ºä¾‹ï¼š**
```bash
# Anvil
npx hardhat run scripts/simulate_traffic.ts --network localhost

# Hyperliquid
npx hardhat run scripts/simulate_traffic.ts --network hyperliquid_testnet

# Sepolia
npx hardhat run scripts/simulate_traffic.ts --network sepolia
```

---

## è„šæœ¬è¯´æ˜

### ğŸ“ éƒ¨ç½²è„šæœ¬ (Shell)

| è„šæœ¬ | åŠŸèƒ½ | ç”¨æ³• |
|------|------|------|
| `deploy-anvil.sh` | Anvil æœ¬åœ°éƒ¨ç½² | `./deploy-anvil.sh` |
| `deploy-hyperliquid.sh` | Hyperliquid æµ‹è¯•ç½‘éƒ¨ç½² | `./deploy-hyperliquid.sh` |
| `deploy-sepolia.sh` | Sepolia æµ‹è¯•ç½‘éƒ¨ç½² | `./deploy-sepolia.sh` |
| `stop-anvil.sh` | åœæ­¢ Anvil èŠ‚ç‚¹ | `./stop-anvil.sh` |

### ğŸ“ æ ¸å¿ƒè„šæœ¬ (scripts/)

| è„šæœ¬ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `server.ts` | **API æœåŠ¡** | æ¥æ”¶/å­˜å‚¨è®¢å•ï¼Œå‰ç«¯é€šè¿‡æ­¤æœåŠ¡è·å–è®¢å•ç°¿ |
| `auto_bot.ts` | **æ¸…ç®—æœºå™¨äºº** | ç›‘æ§è½®æ¬¡æ—¶é—´ï¼Œè‡ªåŠ¨æ‰§è¡Œé“¾ä¸Šæ¸…ç®—å’Œå¼€å¯æ–°è½®æ¬¡ |
| `simulate_traffic.ts` | **æµé‡æ¨¡æ‹Ÿå™¨** | æ¨¡æ‹Ÿç”¨æˆ·ä¸‹å•ï¼Œç”¨äºæµ‹è¯• |

### ğŸ“ éƒ¨ç½²è„šæœ¬ (TypeScript)

| è„šæœ¬ | åŠŸèƒ½ |
|------|------|
| `deploy_sepolia.ts` | é€šç”¨éƒ¨ç½²è„šæœ¬ (Anvil/Sepolia) |
| `deploy_hyperliquid.ts` | Hyperliquid ä¸“ç”¨éƒ¨ç½²è„šæœ¬ |

### ğŸ“ åˆå§‹åŒ–è„šæœ¬

| è„šæœ¬ | åŠŸèƒ½ |
|------|------|
| `init_auction.ts` | åˆå§‹åŒ–æ‹å– (é“¸é€ ä»£å¸ã€æˆæƒã€å¼€å¯è½®æ¬¡) |
| `whitelist_user.ts` | æ·»åŠ ç”¨æˆ·åˆ° KYC ç™½åå• |
| `setup_db.ts` | åˆå§‹åŒ– SQLite æ•°æ®åº“ |

### ğŸ“ ç®¡ç†è„šæœ¬

| è„šæœ¬ | åŠŸèƒ½ |
|------|------|
| `admin_dashboard.ts` | ç®¡ç†å‘˜ä»ªè¡¨æ¿ (æŸ¥çœ‹çŠ¶æ€) |
| `withdraw_proceeds.ts` | æå–å‹Ÿé›†èµ„é‡‘ |
| `fix_contract_balance.ts` | ä¿®å¤åˆçº¦ä»£å¸ä½™é¢ |

### ğŸ“ è°ƒè¯•è„šæœ¬

| è„šæœ¬ | åŠŸèƒ½ |
|------|------|
| `diagnose.ts` | è¯Šæ–­åˆçº¦çŠ¶æ€ |
| `debug_clearing.ts` | è°ƒè¯•æ¸…ç®—é—®é¢˜ |
| `check_bids.ts` | æ£€æŸ¥é“¾ä¸Šå‡ºä»· |
| `show_account.ts` | æ˜¾ç¤ºå½“å‰è´¦æˆ·åœ°å€ |

---

## åˆçº¦è¯´æ˜

### BatchAuction.sol

æ‰¹é‡æ‹å–æ ¸å¿ƒåˆçº¦ï¼Œæ”¯æŒåŠ¨æ€ä¾›åº”é‡å’Œèµ„é‡‘æå–ã€‚

#### ä¸»è¦å‡½æ•°

| å‡½æ•° | æƒé™ | æè¿° |
|------|------|------|
| `deposit(amount)` | ç™½åå•ç”¨æˆ· | å……å€¼ USDC åˆ°åˆçº¦ |
| `withdraw(amount)` | ç”¨æˆ· | æå–ç”¨æˆ·ä½™é¢ |
| `executeClearing(...)` | Owner | æ‰§è¡Œæ¸…ç®— |
| `startNextRound()` | Owner | å¼€å¯ä¸‹ä¸€è½® |
| `withdrawProceeds()` | Owner | æå–å‹Ÿé›†èµ„é‡‘ |

### GreenShoeVault.sol

ç»¿é‹æœºåˆ¶é‡‘åº“ï¼Œç”¨äºæ¥æ”¶æŠ¤ç›˜èµ„é‡‘ (15%)ã€‚

### MockERC20.sol

æµ‹è¯•ç”¨ ERC20 ä»£å¸åˆçº¦ (USDC, wSPX)ã€‚

---

## é…ç½®æŒ‡å—

### ç¯å¢ƒå˜é‡ (.env)

```bash
# ============================================
# å¿…å¡«é…ç½®
# ============================================
PRIVATE_KEY=ä½ çš„ç§é’¥ï¼ˆä¸å¸¦0xå‰ç¼€ï¼‰

# Sepolia ä¸“ç”¨
SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/xxx

# ============================================
# åˆçº¦åœ°å€ (éƒ¨ç½²åè‡ªåŠ¨å¡«å…¥)
# ============================================
AUCTION_ADDRESS=0x...
USDC_ADDRESS=0x...
TOKEN_ADDRESS=0x...
VAULT_ADDRESS=0x...

# ============================================
# ç½‘ç»œé€‰æ‹©
# ============================================
HARDHAT_NETWORK=localhost  # localhost / hyperliquid_testnet / sepolia

# ============================================
# Bot é…ç½® (å¯é€‰)
# ============================================
ROUND_DURATION=300                   # è½®æ¬¡æŒç»­æ—¶é—´ (ç§’)
TOKEN_SUPPLY_PER_ROUND=500           # æ¯è½®ä»£å¸ä¾›åº”é‡
MIN_CLEARING_PRICE=0.01              # æœ€å°æ¸…ç®—ä»·
MAX_CLEARING_PRICE=1000              # æœ€å¤§æ¸…ç®—ä»·
```

### å‰ç«¯é…ç½®

å‰ç«¯ç½‘ç»œåˆ‡æ¢åœ¨ `dabanc-frontend/src/wagmi.ts` ä¸­ï¼š

```typescript
// ä¿®æ”¹æ­¤å˜é‡åˆ‡æ¢ç½‘ç»œ
export const ACTIVE_NETWORK: NetworkType = 'hyperliquid'; // 'local' | 'sepolia' | 'hyperliquid'
```

---

## å¸¸è§é—®é¢˜

### Q: å‰ç«¯æ˜¾ç¤º "Settlement in Progress" å¡ä½ï¼Ÿ

**åŸå› **: `isRoundActive` è¿”å› `undefined` å¯¼è‡´è¯¯åˆ¤

**è§£å†³**: ç¡®ä¿ RPC è¿æ¥æ­£å¸¸ï¼Œåˆ·æ–°é¡µé¢

### Q: Bot æ˜¾ç¤º "rate limited"ï¼Ÿ

**åŸå› **: å…¬å…± RPC èŠ‚ç‚¹è¯·æ±‚é¢‘ç‡é™åˆ¶

**è§£å†³**: 
- å¢åŠ  `simulate_traffic.ts` ä¸­çš„å‘å•é—´éš”
- æˆ–ä½¿ç”¨ä»˜è´¹ RPC èŠ‚ç‚¹

### Q: æ–°è½®æ¬¡å¼€å§‹æ—¶æœ‰æ—§æ•°æ®ï¼Ÿ

**åŸå› **: æ•°æ®åº“æœªæŒ‰è½®æ¬¡éš”ç¦»

**è§£å†³**: å·²ä¿®å¤ï¼Œå‰ç«¯ä¼šåœ¨è½®æ¬¡åˆ‡æ¢æ—¶æ¸…ç©ºæ•°æ®

### Q: MetaMask è¿æ¥ä¸ä¸Šï¼Ÿ

**è§£å†³**:
1. ç¡®è®¤ç½‘ç»œé…ç½®æ­£ç¡® (Chain ID, RPC URL)
2. å°è¯•æ–­å¼€é‡è¿
3. æ¸…é™¤ MetaMask ç¼“å­˜

### Q: å¦‚ä½•æŸ¥çœ‹åˆçº¦åœ°å€ï¼Ÿ

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
npx hardhat run scripts/diagnose.ts --network <network>

# æˆ–æŸ¥çœ‹ .env æ–‡ä»¶
cat .env | grep ADDRESS
```

---

## é¡¹ç›®ç»“æ„

```
Dabanc-Launchpad/
â”œâ”€â”€ contracts/              # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ BatchAuction.sol    # æ‹å–æ ¸å¿ƒåˆçº¦
â”‚   â”œâ”€â”€ GreenShoeVault.sol  # ç»¿é‹é‡‘åº“
â”‚   â””â”€â”€ MockERC20.sol       # æµ‹è¯•ä»£å¸
â”œâ”€â”€ scripts/                # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ server.ts           # API æœåŠ¡
â”‚   â”œâ”€â”€ auto_bot.ts         # æ¸…ç®—æœºå™¨äºº
â”‚   â”œâ”€â”€ simulate_traffic.ts # æµé‡æ¨¡æ‹Ÿå™¨
â”‚   â””â”€â”€ ...
â”œâ”€â”€ config/
â”‚   â””â”€â”€ addresses.ts        # åœ°å€é…ç½®ä¸­å¿ƒ
â”œâ”€â”€ dabanc-frontend/        # React å‰ç«¯
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.tsx         # ä¸»åº”ç”¨
â”‚       â”œâ”€â”€ wagmi.ts        # ç½‘ç»œé…ç½®
â”‚       â””â”€â”€ constants.ts    # åˆçº¦åœ°å€
â”œâ”€â”€ deploy-anvil.sh         # Anvil æœ¬åœ°éƒ¨ç½²
â”œâ”€â”€ deploy-hyperliquid.sh   # Hyperliquid éƒ¨ç½²
â”œâ”€â”€ deploy-sepolia.sh       # Sepolia éƒ¨ç½²
â”œâ”€â”€ stop-anvil.sh           # åœæ­¢ Anvil
â””â”€â”€ hardhat.config.ts       # Hardhat é…ç½®
```

---

## è®¸å¯è¯

MIT License

---

*æœ€åæ›´æ–°: 2025-12*
